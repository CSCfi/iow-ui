<div>
  <div ng-class="{'model-header': !ctrl.model.unsaved, 'main-header': ctrl.model.unsaved}" ng-click="ctrl.visible = ctrl.model.unsaved || !ctrl.visible">
    <h2>{{ctrl.model | translateLabel: ctrl.model}} <accordion-chevron ng-show="!ctrl.model.unsaved" no-pull="true" is-open="ctrl.visible"></accordion-chevron></h2>
  </div>

  <form name="form" class="editable-form">
    <fieldset ng-disabled="ctrl.persisting">
      <div ng-if="ctrl.model" uib-collapse="!ctrl.visible" class="main-editable-content">

        <editable-entity-buttons context="ctrl.model" editable-controller="ctrl">
          <a class="btn btn-default right" ng-show="ctrl.canAskForRights()" ng-href="{{ctrl.getGroup().homepage}}" target="_blank" translate>Ask for group rights</a>
          <export ng-hide="ctrl.isEditing()" entity="ctrl.model" context="ctrl.model"></export>
          <history model="ctrl.model" resource="ctrl.model" ng-hide="ctrl.isEditing()"></history>
          <editable-state-select class="pull-right" ng-if="!ctrl.model.unsaved" id="modelState" state="ctrl.editableInEdit.state" model="ctrl.model"></editable-state-select>
        </editable-entity-buttons>

        <model-form model="ctrl.editableInEdit" model-controller="ctrl.modelController"></model-form>
      </div>
    </fieldset>
  </form>
</div>
